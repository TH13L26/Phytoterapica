var _cartstack=_cartstack||[];var cs_call=!1;var cs_event="capture";var cs_debug=cs_debug||!1;var cs_pro=cs_pro||!1;var cs_pro_hit=cs_pro_hit||!1;var cs_api_host="https://api2.cartstack.com.br";var cs_cart_limit=10;var cs_purchase_cnt=3;var cs_api_urls={purchase:cs_api_host+"/br/v1/purchase/",cart:cs_api_host+"/br/v1/cart/",cart_update:cs_api_host+"/br/v1/cart/update/",browse:cs_api_host+"/br/v1/browse/",lgpd:cs_api_host+"/br/v1/lgpd/"};var dmregExp=/([a-z\-0-9]{2,63})\.([a-z\.]{2,6})$/;function cs_cartItems(){var t=0;if(void 0!==_cartstack){var a=0;for(;a<_cartstack.length;a++)"setCartItem"==_cartstack[a][0]&&t++}return t}function cs_cartItemsLimit(t){cs_cart_limit=xe_isset(cs_cart_limit,"number")?cs_cart_limit:10;var a=0;var e=[];t=void 0===t?_cartstack:t;var r=0;for(;r<t.length;r++)"setCartItem"==t[r][0]&&++a>cs_cart_limit&&e.push(r);if(e.length>0){r=0;for(;r<e.length;r++)t.splice(e[r],1)}return t}
function cs_browseItemsDup(t){var a=0;var e=[];if(void 0!==(t=void 0===t?_cartstack_pro:t)){var r=0;for(;r<t.length;r++)"setBrowseItem"==t[r][0]&&++a>10&&e.push(r);if(e.length>0){r=0;for(;r<e.length;r++)t.splice(e[r],1)}}return t}function cs_apiRequestData(t,a){var e=!1;if(a=void 0!==a&&a){var r=Math.round((new Date).getTime()/1E3);localStorage.setItem("cartstack-api_"+t,String(a)+","+String(r)),e=!0}else{var c=localStorage.getItem("cartstack-api_"+t);if(null!==c)return c.split(",")}return e}
function cs_apiRequestDiff(t,a){var e=cs_apiRequestData(t);var r=!1;if(Array.isArray(e)){var c=parseInt(e[1]);var s=Math.round((new Date).getTime()/1E3)-c;switch(a){case "seconds":r=Math.floor(s);break;case "minutes":r=Math.floor(s/60);break;case "hours":r=Math.floor(s/60/60);break;case "days":r=Math.floor(s/60/60/24);break;case "months":r=Math.floor(s/60/60/24/30)}}return r}
function cs_validRequest(t,a){var e=cs_apiRequestData(t);var r=!0;return Array.isArray(e)&&(r=parseInt(e[0])!==a),r&&cs_apiRequestData(t,a),!r&&"purchase"===t&&(r=0!=cs_purchase_cnt||r,cs_purchase_cnt--),r}
function cs_fullUTMURL(t,a){t=void 0===t?_cartstack:t,a=void 0===a||"object"!=typeof a?{source:"CartStack",medium:"Email",campaign:"CarrinhoAbandonado"}:a;var e=window.location.href;var r="utm_source="+a.source+"&utm_medium="+a.medium+"&utm_campaign="+a.campaign;var c=[];var s;for(s in xe_urlp)xe_urlp.hasOwnProperty(s)&&c.push(s+"="+xe_urlp[s]);c.length>0&&(r=r+"&"+c.join("&")),r=e.indexOf("#")>-1&&-1==r.indexOf("#")?r+"#"+e.split("#")[1]:r,e=e.split("?")[0]+"?"+r;var o=!1;var i=0;for(;i<t.length;i++)o=!!o||"setDataItem"==t[i][0]&&"object"==typeof t[i][1]&&"string"==typeof t[i][1].FullURL;return o||t.push(["setDataItem",{FullURL:e}]),e}function cartstack_getCookie(t){return xe_readCookie(t.split("=")[0],!0)}
function cs_lgpdRestrict(t){t=xe_isset(t,"object")?t:_cartstack,cs_debug&&console.log("[CartStack] Core - cs_lgpdRestrict();");var a=xe_core.requireExtension("lgpd")?xe_core.callService("cookieConsent"):"";a="DENY"===a||""!=a&&-1==a.indexOf("EMAIL_MARKETING"),cs_debug&&console.log("[CartStack] Core - cs_lgpdRestrict = "+(a?"true":"false"));var e=["+","-","*","/"];var r=Math.floor(10*Math.random())+1;var c=Math.floor(10*Math.random())+1;var s=e[Math.floor(Math.random()*e.length)];var o;switch(s){case "+":o=r+c;break;case "-":o=r-c;break;case "*":o=r*c;break;case "/":o=r/c}var i=r+" "+s+" "+c+" === "+o;"checkout"===cs_event&&(xex_visitor.trackCph=!0,xex_visitor.hkINP());var n=xe_core.callService("visitorInfo",i);var l=!1;var d=0;for(;d<t.length;d++)l=!!l||"xe_visitorID"==t[d][0];if(!a&&!l){if(t.push(["xe_visitorID",String(n.id)]),xe_core.vm&&t.push(["xe_vm",xe_core.vm]),t.push(["xe_DGUID",xe_isset(xe_config.crossDomain)?String(xe_config.crossDomain.DGUID):String(xe_config.GUID)]),"object"==typeof performaConfig&&performaConfig.hasOwnProperty("status")&&"ok"===performaConfig.status&&performaConfig.hasOwnProperty("details")){var p=performaConfig.details.modules.powercart;xe_isset(p,"boolean")&&t.push(["pfmPowerCart",p]),xe_isset(p=performaConfig.details.modules.powerzap,"boolean")&&t.push(["pfmPowerZap",p]),xe_isset(p=performaConfig.details.modules.powersms,"boolean")&&t.push(["pfmPowerSMS",p])}xe_isset(n.cph,"string")&&t.push(["cph",n.cph])}return a}
function csAPICall(t,a){if(cs_lgpdRestrict())return!1;cs_cartItemsLimit();var e=window.btoa(encodeURIComponent(JSON.stringify(_cartstack)));if(cs_validRequest(t,e.length)){var r=new XMLHttpRequest;r.open("GET",cs_api_urls[[t]]+"?payload="+e,!0),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var t=r.responseText.indexOf('{"')>-1&&JSON.parse(r.responseText);!1!==t&&"function"==typeof a?a(t,200):a(!1,200)}else"function"==typeof a&&a(!1,r.status)},r.send(null)}else cs_debug&&console.log("[CartStack] Core - @csAPICall("+
t+"), Request already sent!")}
function cartstackCall(){if(cs_call)return!1;if(cs_call=!0,cs_debug&&console.log("[CartStack] Core - @cartstackCall();"),void 0!==_cartstack&&!cartstack_confirmation){var t="";var a=0;var e=window.location.href;e.indexOf("cartstacktest=true")>-1&&(a=1,_cartstack.push(["setShowAlert",1]));var r=0;var c=0;var s="";var o="";var i="";var n="";var l=0;for(;l<_cartstack.length;l++){var d=_cartstack[l][0];var p=_cartstack[l][1];"setAPI"==d&&"capture"==p&&(c=1),"setAPI"==d&&"confirmation"==p&&(cartstack_confirmation=1),"setAPI"==d&&"tracking"==p&&(r=1),"setEmail"==d&&(s=p),"setSiteID"==d&&(o=p),"setEmailAddressInput"==d&&(i=p),"setDomain"==d&&(n=p),"setCartID"==d&&(t=p)}if(0==n.length){var f;n=window.location.hostname;null!==(f=dmregExp.exec(n))&&(f.index===dmregExp.lastIndex&&dmregExp.lastIndex++,n=f[0]&&"undefined"!=f[0]?String(f[0]):-1)}if(!0===navigator.cookieEnabled){var k;var $=e.indexOf("cs_e_id=");if($>-1){$=$+8;var g=e.indexOf("&",$);s=decodeURIComponent(s=g>-1?e.substring($,g):e.substring($))}e.indexOf("_cscid=")>-1&&(t=(k=e.split("_cscid=")[1]).indexOf("&")>-1?k.split("&")[0]:k);var m=xe_core.callService("visitorInfo").email;var h=xe_readCookie("cartstack.com-cartid");if(isNaN(h)&&(h="",xe_deleteCookie("cartstack.com-cartid")),c&&!r)cs_event="capture",cs_debug&&console.log("[CartStack] Core - Event: Capture");else if(cartstack_confirmation){if(cs_event="confirmation",cs_debug&&console.log("[CartStack] Core - Event: Confirmation"),""!=m){var C=1;var v=1;l=0;for(;l<_cartstack.length;l++)"setEmail"==_cartstack[l][0]&&(_cartstack[l][1]=m,C=0),"setCartID"==_cartstack[l][0]&&(_cartstack[l][1]=h,v=0);C&&_cartstack.push(["setEmail",m]),v&&""!=h&&_cartstack.push(["setCartID",h]),csAPICall("purchase",function(t,a){200==a?(xe_deleteCookie("cartstack.com-cartid"),cs_debug&&console.log("[CartStack] Core - @csAPICall(purchase), Email removed from queue!")):cs_debug&&console.log("[CartStack] Core - @csAPICall(purchase), API Failed!")})}}else{if(cs_event="checkout",cs_debug&&console.log("[CartStack] Core - Event: Cart/Checkout"),""!=m){var _=1;l=0;for(;l<_cartstack.length;l++)"setEmail"==_cartstack[l][0]&&(_cartstack[l][1]=m,_=0);_&&_cartstack.push(["setEmail",m]),""!=h&&_cartstack.push(["setCartID",h])}else cs_debug&&console.log("[CartStack] Core - No email found to track");cs_cartItems()>0||""!=m?csAPICall("cart",function(t,a){if(!1!==t){var e=0;for(;e<_cartstack.length;e++)"setCartID"==_cartstack[e][0]&&(_cartstack[e][1]=t.cartid);xe_createCookie("cartstack.com-cartid",t.cartid,365,!0),""!=t.email&&cs_apiRequestData("strictcart","@"),cs_debug&&console.log("[CartStack] Core - @csAPICall(cart), Strict: "+(""!==t.email?"true":"false")),cs_debug&&alert(t.debug)}else cs_debug&&console.log("[CartStack] Core - @csAPICall(cart), Cart API Failed!")}):cs_debug&&console.log("[CartStack] Core - @csAPICall(cart), Cart not sent... no products/email")}}else cs_debug&&alert("Cookies not enabled!")}}
function cartstack_LGPD(t){if(cs_debug&&console.log("[CartStack] Core - cartstack_LGPD();"),!xe_core.requireExtension("lgpd"))return cs_debug&&console.log("[CartStack] Core - LGPD Extension not loaded!"),!1;var a=new XMLHttpRequest;a.open("GET",cs_api_urls.lgpd+"?payload="+window.btoa(encodeURIComponent(JSON.stringify(t)))+"&cache=bypass",!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status?cs_debug&&console.log("[CartStack] Core - @cartstack_LGPD, Block Sent!"):cs_debug&&console.log("[CartStack] Core - @cartstack_LGPD, Block failed!")},a.send(null)}
function cartstack_updatecart(t){if(xe_core.requireExtension("lgpd")&&!xe_core.callService("cookieConsent","MARKETING,EMAIL_MARKETING"))return!1;var a=!1;var e=0;var r=0;var c="";var s=0;var o=window.location.href;cs_debug&&console.log("[CartStack] Core - cartstack_updatecart();"),o.indexOf("cartstacktest=true")>-1&&(s=1,t.push(["setShowAlert",1]),a=!0);var i=0;for(;i<t.length;i++){var n=t[i][0];var l=t[i][1];"setDomain"==n&&(c=l),"setAPI"==n&&"confirmation"==l&&(r=1),"setEmail"==n&&(e=1)}if(0==c.length){var d=window.location.hostname.split(".");if(d.length>=3){i=1;for(;i<d.length;i++)c=0==c.length?d[i]:c+"."+d[i]}else c=d.length>=2?d[0]+"."+d[1]:d[0]}if(!0===navigator.cookieEnabled){var p=cartstack_getCookie("cartstack.com-cartid=");var f=xe_core.callService("visitorInfo").email;if(a&&alert('CartID from Cookie: "'+p+'"'),t.push(["setCartID",p]),e||(cartstack_update_email=f,a&&alert('Email from Cookie: "'+cartstack_update_email+'"'),cartstack_update_email.length>0&&t.push(["setEmail",cartstack_update_email])),r){var k=new XMLHttpRequest;a&&alert("Confirmation!! -> "+u),k.open("GET",cs_api_urls.purchase+"?payload="+window.btoa(encodeURIComponent(JSON.stringify(t))),!0),k.onreadystatechange=function(){4==k.readyState&&200==k.status&&(xe_deleteCookie("cartstack.com-cartid"),a&&alert("CartID Cookie erased!"),cs_debug&&console.log("[CartStack] Core - @cartstack_updatecart, Real time purchase"))},k.send(null),a&&alert("Confirmation Sent to the server!")}else if(!cs_lgpdRestrict(t))if(cs_cartItems()>0||""!=f){t=cs_cartItemsLimit(t);var $=window.btoa(encodeURIComponent(JSON.stringify(t)));if(cs_validRequest("cart_update",$.length)){k=new XMLHttpRequest;k.open("GET",cs_api_urls.cart_update+"?payload="+$,!0),k.onreadystatechange=function(){if(4==k.readyState&&200==k.status){var t=JSON.parse(k.responseText);""!=t.email&&cs_apiRequestData("strictcart","@"),cs_debug&&console.log("[CartStack] Core - @cartstack_updatecart, Real time cart! Strict: "+(""!=t.email?"true":"false")),xe_createCookie("cartstack.com-cartid",t.cartid,365,!0)}},k.send(null)}else cs_debug&&console.log("[CartStack] Core - @cartstack_updatecart, Request already sent!")}else cs_debug&&console.log("[CartStack] Core - @cartstack_updatecart, Cart not sent... no products/email")}else s&&alert("Cookies not enabled!")}var cartstack_confirmation=cartstack_confirmation||0;